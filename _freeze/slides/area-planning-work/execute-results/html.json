{
  "hash": "db8b91e306c21702f4dc65ca1b13cce4",
  "result": {
    "markdown": "---\ntitle: \"Area Planning Work with R\"\nauthor: \"Eli Pousson\"\nformat: revealjs\nslide-level: 3\ncode-link: true\nscrollable: true\nexecute: \n  echo: true\n---\n\n\n# About\n\n# Package development\n\n## What packages am I using?\n\nMy data analysis and mapping work depends on a tall stack of open-source packages especially from the `{tidyverse}` along with the [rOpenSci]() and rspatial communities.\n\nI have a lot of favorite R packages across a few different categories:\n\n-   package development\n-   programming\n-   visualization\n-   data management\n\n### Packages I use for package development\n\n-   `{usethis}`\n-   `{devtools}`\n-   `{sinew}`\n-   `{testthat}`\n-   `{pkgdown}`\n\n### Packages I use for programming\n\n-   `{sf}`\n-   `{dplyr}` (and `{vctrs}`)\n-   `{rlang}`\n-   `{cli}`\n-   `{httr2}`\n\n### Packages I use for visualization\n\n-   [mapboxapi](https://walker-data.com/mapboxapi/)\n-   `{ggplot2}` (with Adobe Illustrator sometimes)\n-   `{mapview}`\n-   [feltr](https://elipousson.github.io/feltr/)\\* (with Felt)\n-   `{gt}`\n\n### Packages I use for data management\n\n-   `{osmdata}` (with OpenStreetMap)\n-   `{rairtable}` [development version](https://github.com/matthewjrogers/rairtable/tree/dev)\\* (with Airtable)\n-   `{googlesheets4}` (with Google Sheets)\n-   `{officer}` (with Microsoft Word)\n\n## When did I start building packages?\n\n::: notes\n-   June 2019: Started learning R\n-   Oct. 2020: Started `{mapbaltimore}` after a webinar on working with the `{mapboxapi}` package\n-   Dec. 2020: Started contributing to open-source packages, `{FlickrAPI}`, `{esri2sf}`, and `{mapboxapi}`\n-   November 2021: `{crashapi}` for accessing the National Highway Traffic Safety Administration (NHTSA) Fatality Analysis Reporting System (FARS) API\n:::\n\n## What types of packages am I working on?\n\n-   local data packages\n-   data access packages\n-   analysis and visualization packages\n\n## How did I get to this current approach?\n\nData packages ðŸ‘‰ Utility packages ðŸ‘‰ Visualization packages\n\n:::: {.columns}\n\n::: {.column width='25%'}\n![mapbaltimore](https://elipousson.github.io/mapbaltimore/logo.png)\n:::\n\n::: {.column width='25%'}\n![sfext](https://elipousson.github.io/sfext/logo.png)\n:::\n\n::: {.column width='25%'}\n![maplayer](https://elipousson.github.io/getdata/logo.png)\n:::\n\n::: {.column width='25%'}\n![maplayer](https://elipousson.github.io/maplayer/logo.png)\n:::\n\n::::\n\n::: notes\nInitially:\n\n-   2021?: Split `{overedge}` from `{mapbaltimore}`\n-   Split:\n-   June 2022: Split `{overedge}` into a few smaller packages: `{sfext}`, `{getdata}`, and `{maplayer}`\n-   `{streetmixr}` for working with the Street Mix API\n-   January 2023: `{officerExtras}` for extending the `{officer}` package (and working with tables and heading in Microsoft Word)\n-   May 2023: `{feltr}` for working with the Felt API (Felt is a new, highly recommend online mapping application)\n\nMore recently:\n\n-   July 2023: `{getACS}` for downloading `{tidycensus}` data, adding supplementary metadata, and making plots and tables\n-   September 2023: `{sharepointr}` for reading and writing files and lists from SharePoint\n:::\n\n## What are some local data projects am I working on?\n\nA few packages:\n\n-   `{bcpss}`: Tidy survey, program, and zone data from and about Baltimore City Public Schools.\n-   `{marylandedu}`: Tidy enrollment and demographic data from Maryland State Department of Education.\n-   `{baltimorecensus}`: Accessible U.S. Census geographies.\n-   `{baltimoremls}`: Utility functions for Bright MLS sales data.\n\n## What are some local data projects am I working on?\n\nA few data analyses (all WIP):\n\n-   bcpsstransportation\\*\n-   baltimorecrash\\*\n-   [baltimoretaxsale](https://github.com/elipousson/baltimoretaxsale)\n\n## What am I hoping to try next?\n\nI'm still learning new approaches all the time. Here are a few packages I'm excited to learn:\n\n-   `{targets}`\n-   `{rdeck}`\n-   `{arcgislayers}`\n\n# Applications of R in Planning\n\n---\n\n![John Ruhrah EMS INSPIRE Plan](images/2023-06-08_john-ruhrah-ems_inspire-plan_cover.jpg)\n\n## All the little things\n\n-   Maps\n-   Tables\n-   Graphics\n-   Writing\n\n## Making the little things takes a lot of work\n\n-   Data import and tidying\n-   Data transformation and analysis\n-   Managing text\n-   Managing multiple output formats\n\n## Building demographic data tables with `{gt}` and `{getACS}`\n\n-   What do you do in advance?\n-   What do you do as needed?\n\n### Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pak::pkg_install(\"elipousson/getACS\")\nlibrary(getACS)\nlibrary(tidyverse)\n```\n:::\n\n\n### First steps\n\n-   Get data\n-   Combine with metadata\n-   Recalculate variables\n-   Use areal interpolation as needed\n\n------------------------------------------------------------------------\n\nUsing getACS to get data, combine with metadata, and recalculate estimates as a share of the denominator:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndelmarva_acs <- map(\n  c(\"MD\", \"DC\", \"VA\"),\n  ~ get_acs_geographies(\n  geography = c(\"county\", \"state\"),\n  table = \"B08134\",\n  state = .x,\n  quiet = TRUE\n  )\n)\n\ndc_acs <- delmarva_acs[[2]]\n\ndc_acs\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 240 Ã— 24\n   GEOID NAME  variable column_id table_id estimate   moe perc_estimate perc_moe\n   <chr> <chr> <chr>    <chr>     <chr>       <dbl> <dbl>         <dbl>    <dbl>\n 1 11001 Distâ€¦ B08134_â€¦ B08134001 B08134     297447  3393          1        0.02\n 2 11001 Distâ€¦ B08134_â€¦ B08134002 B08134      15708  1235          0.05     0   \n 3 11001 Distâ€¦ B08134_â€¦ B08134003 B08134      22069  1093          0.07     0   \n 4 11001 Distâ€¦ B08134_â€¦ B08134004 B08134      34554  1826          0.12     0.01\n 5 11001 Distâ€¦ B08134_â€¦ B08134005 B08134      43447  1548          0.15     0   \n 6 11001 Distâ€¦ B08134_â€¦ B08134006 B08134      22820  1166          0.08     0   \n 7 11001 Distâ€¦ B08134_â€¦ B08134007 B08134      60341  2153          0.2      0.01\n 8 11001 Distâ€¦ B08134_â€¦ B08134008 B08134      38187  1849          0.13     0.01\n 9 11001 Distâ€¦ B08134_â€¦ B08134009 B08134      34521  1746          0.12     0.01\n10 11001 Distâ€¦ B08134_â€¦ B08134010 B08134      25800  1395          0.09     0   \n# â„¹ 230 more rows\n# â„¹ 15 more variables: table_title <chr>, simple_table_title <chr>,\n#   subject_area <chr>, universe <chr>, denominator_column_id <chr>,\n#   topics <chr>, line_number <dbl>, column_title <chr>, indent <dbl>,\n#   parent_column_id <chr>, denominator_estimate <dbl>, denominator_moe <dbl>,\n#   denominator_column_title <chr>, geography <chr>, state <chr>\n```\n\n\n:::\n:::\n\n\n### Next steps\n\n-   Subset data to area\n-   Recode values if needed\n-   Create table or visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncommute_acs_tbl <- dc_acs |> \n  filter_acs(\n    indent == 1,\n    line_number >= 11,\n    geography = \"state\"\n    ) |> \n  select_acs(.name_col = NULL) |> \n  gt_acs(\n    column_title_label = \"Mode of transportation\",\n    table = dc_acs$table_id\n  )\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncommute_acs_tbl\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"nguoadvomk\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#nguoadvomk table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#nguoadvomk thead, #nguoadvomk tbody, #nguoadvomk tfoot, #nguoadvomk tr, #nguoadvomk td, #nguoadvomk th {\n  border-style: none;\n}\n\n#nguoadvomk p {\n  margin: 0;\n  padding: 0;\n}\n\n#nguoadvomk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#nguoadvomk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#nguoadvomk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#nguoadvomk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#nguoadvomk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#nguoadvomk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#nguoadvomk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#nguoadvomk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#nguoadvomk .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#nguoadvomk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#nguoadvomk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#nguoadvomk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#nguoadvomk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#nguoadvomk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#nguoadvomk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nguoadvomk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#nguoadvomk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#nguoadvomk .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#nguoadvomk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nguoadvomk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#nguoadvomk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nguoadvomk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#nguoadvomk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nguoadvomk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nguoadvomk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nguoadvomk .gt_left {\n  text-align: left;\n}\n\n#nguoadvomk .gt_center {\n  text-align: center;\n}\n\n#nguoadvomk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#nguoadvomk .gt_font_normal {\n  font-weight: normal;\n}\n\n#nguoadvomk .gt_font_bold {\n  font-weight: bold;\n}\n\n#nguoadvomk .gt_font_italic {\n  font-style: italic;\n}\n\n#nguoadvomk .gt_super {\n  font-size: 65%;\n}\n\n#nguoadvomk .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#nguoadvomk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#nguoadvomk .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#nguoadvomk .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#nguoadvomk .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#nguoadvomk .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#nguoadvomk .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Mode of transportation\">Mode of transportation</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Est.\">Est.</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"% share\">% share</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"column_title\" class=\"gt_row gt_left\">Car, truck, or van</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">131,329 Â± 3,031</td>\n<td headers=\"perc_estimate\" class=\"gt_row gt_right\">44% Â± 1%</td></tr>\n    <tr><td headers=\"column_title\" class=\"gt_row gt_left\">Public transportation (excluding taxicab)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">100,595 Â± 2,297</td>\n<td headers=\"perc_estimate\" class=\"gt_row gt_right\">34% Â± 1%</td></tr>\n    <tr><td headers=\"column_title\" class=\"gt_row gt_left\">Walked</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">41,960 Â± 1,475</td>\n<td headers=\"perc_estimate\" class=\"gt_row gt_right\">14% Â± 0%</td></tr>\n    <tr><td headers=\"column_title\" class=\"gt_row gt_left\">Taxicab, motorcycle, bicycle, or other means</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">23,563 Â± 1,485</td>\n<td headers=\"perc_estimate\" class=\"gt_row gt_right\">8% Â± 0%</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"3\">Source: 2017-2021 ACS 5-year Estimates, Table B08134.</td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Map-making with `{getdata}`, `{maplayer}`, and `{mapboxapi}`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(getdata)\nlibrary(maplayer)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### Downloading data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndc_wards <- get_location(\n  \"https://maps2.dcgis.dc.gov/dcgis/rest/services/DCGIS_DATA/Demographic_WebMercator/MapServer/39\"\n)\n\ndc_wards\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 8 features and 97 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -8584933 ymin: 4691871 xmax: -8561515 ymax: 4721078\nProjected CRS: WGS 84 / Pseudo-Mercator\n  OBJECTID GEOID NAMELSAD DP05_0001E DP05_0002E DP05_0003E DP05_0004E\n1        1 11001   Ward 1      82404      39512      42892       92.1\n2        2 11002   Ward 2      83925      40917      43008       95.1\n3        3 11003   Ward 3      82450      37996      44454       85.5\n4        4 11004   Ward 4      86085      41989      44096       95.2\n5        5 11005   Ward 5      89082      42795      46287       92.5\n6        6 11006   Ward 6      79161      38599      40562       95.2\n7        7 11007   Ward 7      91997      44239      47758       92.6\n8        8 11008   Ward 8      88050      39443      48607       81.1\n  DP05_0005E DP05_0006E DP05_0007E DP05_0008E DP05_0009E DP05_0010E DP05_0011E\n1       4653       3202       2731       3877       6330      26719      14746\n2       2845        999        950       7065      11558      24359      11797\n3       4085       4293       3281       5203       5328      14681      11903\n4       5654       6329       5129       3368       3474      13220      14759\n5       5783       4841       4250       4289       6126      18785      14205\n6       4216       2487       2163       2300       4955      25640      14534\n7       7591       6038       5528       5199       5616      16482      12459\n8       8131       6880       7417       5340       5924      15828      12395\n  DP05_0012E DP05_0013E DP05_0014E DP05_0015E DP05_0016E DP05_0017E DP05_0018E\n1       7881       3901       2563       3869       1383        549       32.5\n2       7047       3974       4032       5795       2779        725       32.3\n3      10122       4192       3923       7980       5322       2137       38.4\n4      11117       5448       4813       7706       3292       1776       39.0\n5      10408       4311       4596       6420       3330       1738       35.2\n6       8583       3599       2957       4688       2236        803       34.0\n7      10006       5152       5697       7102       3576       1551       34.7\n8       8437       4618       4638       5412       2050        980       31.0\n  DP05_0019E DP05_0020E DP05_0021E DP05_0022E DP05_0023E DP05_0024E DP05_0025E\n1      11854      71298      70550      66675       7139       5801      70550\n2       5303      79049      78622      68722      11239       9299      78622\n3      13305      70274      69145      64312      17904      15439      69145\n4      19523      68236      66562      64886      15700      12774      66562\n5      16637      73628      72445      68795      14527      11488      72445\n6      10113      70025      69048      67373       9432       7727      69048\n7      22400      71788      69597      67008      15478      12229      69597\n8      25887      64107      62163      59442      11252       8442      62163\n  DP05_0026E DP05_0027E DP05_0028E DP05_0029E DP05_0030E DP05_0031E DP05_0032E\n1      33692      36858       91.4       5801       2401       3400       70.6\n2      38682      39940       96.9       9299       4354       4945       88.0\n3      31240      37905       82.4      15439       6818       8621       79.1\n4      31677      34885       90.8      12774       5267       7507       70.2\n5      34620      37825       91.5      11488       4272       7216       59.2\n6      33185      35863       92.5       7727       3295       4432       74.3\n7      32312      37285       86.7      12229       4834       7395       65.4\n8      26809      35354       75.8       8442       3277       5165       63.4\n  DP05_0033E DP05_0034E DP05_0035E DP05_0036E DP05_0037E DP05_0038E DP05_0039E\n1      82404      76164       6240      76164      41431      21213        400\n2      83925      78218       5707      78218      58021       9417        432\n3      82450      77017       5433      77017      62358       7184         92\n4      86085      80071       6014      80071      25169      41998        243\n5      89082      84742       4340      84742      22839      54807        255\n6      79161      74657       4504      74657      51212      17663         95\n7      91997      88437       3560      88437       7192      78810        316\n8      88050      84991       3059      84991       8151      74017        151\n  DP05_0040E DP05_0041E DP05_0042E DP05_0043E DP05_0044E DP05_0045E DP05_0046E\n1          0          0          0          0       4670       1405        617\n2          0          0          0          0       7764       2087       2840\n3          0          0          0          0       5935       2148       1140\n4          0          0          0          0       1536        516        223\n5          0          0          0          0       2614        592        521\n6          0          0          0          0       4075        534       1700\n7          0          0          0          0        648         92        104\n8          0          0          0          0        746        127        128\n  DP05_0047E DP05_0048E DP05_0049E DP05_0050E DP05_0051E DP05_0052E DP05_0053E\n1        422        139        610        825        652         52         34\n2        318        337        989        350        843         91          8\n3        710        205        229        598        905         60         37\n4        147         47        146        202        255          0          0\n5        527         29        343        305        297         99         95\n6        381        174        684        272        330         26          0\n7         34         11        272         74         61         19          0\n8         68          0        275         23        125         12          1\n  DP05_0054E DP05_0055E DP05_0056E DP05_0057E DP05_0058E DP05_0059E DP05_0060E\n1          0          0         18       8398       6240        809        219\n2         29          0         54       2493       5707        690        246\n3         13          0         10       1388       5433        980        131\n4          0          0          0      11125       6014       1165        179\n5          4          0          0       4128       4340       1459        162\n6          0         12         14       1586       4504        987        214\n7          0          0         19       1452       3560       1006        104\n8          8          0          3       1914       3059       1143        149\n  DP05_0061E DP05_0062E DP05_0063E DP05_0064E DP05_0065E DP05_0066E DP05_0067E\n1       1267        417      82404      46690      23121       1418       6168\n2       1382         13      83925      63164      10758        969       9478\n3       1517         68      82450      67494       8692        538       7741\n4        447        340      86085      29685      45158       1609       2780\n5        624        123      89082      26324      57527        942       3810\n6       1192        112      79161      55272      19351        572       5773\n7        279        832      91997       9470      81375       1596       1104\n8        166        530      88050      10526      76253       1068       1132\n  DP05_0068E DP05_0069E DP05_0070E DP05_0071E DP05_0072E DP05_0073E DP05_0074E\n1         98      11575      82404      17017       2838       1082        462\n2        222       5619      83925      11251       2220        958        665\n3         83       3937      82450       8216       1288        788        693\n4        237      14080      86085      18628       1860        651        441\n5        318       5326      89082       8265       1876        666        183\n6         93       3013      79161       6332       1281        730        369\n7         55       2347      91997       3802        728        524        361\n8         99       2663      88050       3471       1011        804          8\n  DP05_0075E DP05_0076E DP05_0077E DP05_0078E DP05_0079E DP05_0080E DP05_0081E\n1      12635      65387      36338      20384        184       4598         52\n2       7408      72674      52548       9193         85       7598         91\n3       5447      74234      58064       6853         26       5841         36\n4      15676      67457      21216      41098         94       1536          0\n5       5540      80817      20645      54053        190       2579         95\n6       3952      72829      47824      17539         43       3999         14\n7       2189      88195       6543      77487        268        639          0\n8       1648      84579       7218      73109        113        732          9\n  DP05_0082E DP05_0083E DP05_0084E DP05_0085E DP05_0086E DP05_0087E DP05_0088E\n1        580       3251        480       2771      42860      61241      28734\n2        174       2985        973       2012      50324      69707      34477\n3        411       3003        347       2656      42476      62064      28229\n4        463       3050        441       2609      36284      57069      26590\n5        339       2916        199       2717      42066      67939      32150\n6        260       3150        497       2653      46550      65343      31454\n7        462       2796        180       2616      41318      67919      31367\n8        917       2481         38       2443      42428      61055      26163\n  DP05_0089E SHAPE.AREA SHAPE.LEN                    GIS_ID\n1      32507          0         0 ACS_Demographic_DC_Ward_1\n2      35230          0         0 ACS_Demographic_DC_Ward_2\n3      33835          0         0 ACS_Demographic_DC_Ward_3\n4      30479          0         0 ACS_Demographic_DC_Ward_4\n5      35789          0         0 ACS_Demographic_DC_Ward_5\n6      33889          0         0 ACS_Demographic_DC_Ward_6\n7      36552          0         0 ACS_Demographic_DC_Ward_7\n8      34892          0         0 ACS_Demographic_DC_Ward_8\n                              GEONAME                               GLOBALID\n1 Ward 1 (2022), District of Columbia {A8BDB2A5-BC64-4797-86A3-59D07CB339F9}\n2 Ward 2 (2022), District of Columbia {B76AA6F1-C20D-407A-A7B9-FCEF33CAE4BD}\n3 Ward 3 (2022), District of Columbia {70C2C87D-3384-4710-9566-8BBF1430957E}\n4 Ward 4 (2022), District of Columbia {EAEC242D-526F-4B40-9D0D-50AAFED0B154}\n5 Ward 5 (2022), District of Columbia {5A3FBA65-7076-40B5-A9F6-577FDA6434F0}\n6 Ward 6 (2022), District of Columbia {E785FE32-1537-4180-B638-E843085072B2}\n7 Ward 7 (2022), District of Columbia {C226EFA3-A1DD-47F9-B4AB-622E06A5C87D}\n8 Ward 8 (2022), District of Columbia {DED98CA0-3002-47B4-B538-D5197018ED3F}\n                           geoms\n1 MULTIPOLYGON (((-8577254 47...\n2 MULTIPOLYGON (((-8580711 47...\n3 MULTIPOLYGON (((-8584932 47...\n4 MULTIPOLYGON (((-8579577 47...\n5 MULTIPOLYGON (((-8573742 47...\n6 MULTIPOLYGON (((-8576466 47...\n7 MULTIPOLYGON (((-8569782 47...\n8 MULTIPOLYGON (((-8576945 46...\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n### Subsetting data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nward_5 <- get_location(\n  dc_wards,\n  name = \"Ward 5\",\n  name_col = \"NAMELSAD\"\n)\n\nward_5\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 1 feature and 97 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -8573742 ymin: 4706949 xmax: -8565136 ymax: 4715554\nProjected CRS: WGS 84 / Pseudo-Mercator\n  OBJECTID GEOID NAMELSAD DP05_0001E DP05_0002E DP05_0003E DP05_0004E\n5        5 11005   Ward 5      89082      42795      46287       92.5\n  DP05_0005E DP05_0006E DP05_0007E DP05_0008E DP05_0009E DP05_0010E DP05_0011E\n5       5783       4841       4250       4289       6126      18785      14205\n  DP05_0012E DP05_0013E DP05_0014E DP05_0015E DP05_0016E DP05_0017E DP05_0018E\n5      10408       4311       4596       6420       3330       1738       35.2\n  DP05_0019E DP05_0020E DP05_0021E DP05_0022E DP05_0023E DP05_0024E DP05_0025E\n5      16637      73628      72445      68795      14527      11488      72445\n  DP05_0026E DP05_0027E DP05_0028E DP05_0029E DP05_0030E DP05_0031E DP05_0032E\n5      34620      37825       91.5      11488       4272       7216       59.2\n  DP05_0033E DP05_0034E DP05_0035E DP05_0036E DP05_0037E DP05_0038E DP05_0039E\n5      89082      84742       4340      84742      22839      54807        255\n  DP05_0040E DP05_0041E DP05_0042E DP05_0043E DP05_0044E DP05_0045E DP05_0046E\n5          0          0          0          0       2614        592        521\n  DP05_0047E DP05_0048E DP05_0049E DP05_0050E DP05_0051E DP05_0052E DP05_0053E\n5        527         29        343        305        297         99         95\n  DP05_0054E DP05_0055E DP05_0056E DP05_0057E DP05_0058E DP05_0059E DP05_0060E\n5          4          0          0       4128       4340       1459        162\n  DP05_0061E DP05_0062E DP05_0063E DP05_0064E DP05_0065E DP05_0066E DP05_0067E\n5        624        123      89082      26324      57527        942       3810\n  DP05_0068E DP05_0069E DP05_0070E DP05_0071E DP05_0072E DP05_0073E DP05_0074E\n5        318       5326      89082       8265       1876        666        183\n  DP05_0075E DP05_0076E DP05_0077E DP05_0078E DP05_0079E DP05_0080E DP05_0081E\n5       5540      80817      20645      54053        190       2579         95\n  DP05_0082E DP05_0083E DP05_0084E DP05_0085E DP05_0086E DP05_0087E DP05_0088E\n5        339       2916        199       2717      42066      67939      32150\n  DP05_0089E SHAPE.AREA SHAPE.LEN                    GIS_ID\n5      35789          0         0 ACS_Demographic_DC_Ward_5\n                              GEONAME                               GLOBALID\n5 Ward 5 (2022), District of Columbia {5A3FBA65-7076-40B5-A9F6-577FDA6434F0}\n                           geoms\n5 MULTIPOLYGON (((-8573742 47...\n```\n\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n### Make a basemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmake_mapbox_map(\n  dc_wards,\n  style_url = \"mapbox://styles/mapbox/navigation-day-v1\",\n  asp = 1,\n  expand = FALSE,\n  color = NA\n)\n```\n\n::: {.cell-output-display}\n![](area-planning-work_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n### Make a basemap\n\n\n::: {.cell}\n\n```{.r .cell-code}\nward_5_map <- make_mapbox_map(\n  ward_5,\n  style_url = \"mapbox://styles/mapbox/navigation-day-v1\",\n  asp = 1,\n  expand = FALSE,\n  color = NA\n)\n\nward_5_map\n```\n\n::: {.cell-output-display}\n![](area-planning-work_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n### Add an inset map\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlayer_inset(\n  map = ward_5_map,\n  inset = layer_location_context(\n    context = dc_wards,\n    location = ward_5,\n    basemap = TRUE\n  )\n)\n```\n\n::: {.cell-output-display}\n![](area-planning-work_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n### Get more area data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nward_5_schools <- get_osm_data(\n    ward_5,\n    key = \"building\",\n    value = \"school\",\n    geometry = \"polygon\"\n    )\n```\n:::\n\n\n------------------------------------------------------------------------\n\n### Add icon markers to a map\n\n\n::: {.cell}\n\n```{.r .cell-code}\nward_5_map +\n  layer_icon(\n    ward_5_schools,\n    icon = \"school\",\n    source = \"openstreetmap/map-icons\",\n    size = 3\n  )\n```\n\n::: {.cell-output-display}\n![](area-planning-work_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "area-planning-work_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}